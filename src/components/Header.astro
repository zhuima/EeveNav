---
const { pathname } = Astro.url;

const navs = [
  {
    name: '首页',
    href: '/',
    active: pathname === '/'
  },
  {
    name: '博客',
    href: '/blog',
    active: pathname === '/blog' || pathname.startsWith('/blog/')
  },
  {
    name: '关于',
    href: '/about',
    active: pathname === '/about'
  },
  {
    name: '管理',
    href: '/admin',
    active: pathname === '/admin'
  },
];
---

<div
  class="sticky top-0 z-50 w-full border-border/40 bg-background/95 backdrop-blur"
>
  <div class="container flex h-14 items-center justify-between">
    <div class="flex items-center">
      <a
        class="mr-4 flex items-center space-x-2 lg:mr-6"
        href="/"
      >
        <svg  
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 256 256"
          class="h-6 w-6"
        >
          <rect width="256" height="256" fill="none"></rect>
          <line
            x1="208"
            y1="128"
            x2="128"
            y2="208"
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="16"
          ></line>
          <line
            x1="192"
            y1="40"
            x2="40"
            y2="192"
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="16"
          ></line>
        </svg>
        <span class="font-bold lg:inline-block">EeveNav</span>
      </a>
      <nav class="hidden md:flex items-center gap-4 text-sm lg:gap-6">
        {
          navs.map(nav => (
            <a
              class={`transition-colors hover:text-foreground/80 ${nav.active ? 'text-foreground font-medium' : 'text-foreground/60'}`}
              href={nav.href}
            >{nav.name}</a>
          ))
        }
      </nav>
    </div>
    
    <!-- 移动端菜单按钮 -->
    <button id="mobile-menu-button" class="md:hidden flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>
  </div>
  
  <!-- 移动端菜单 -->
  <div id="mobile-menu" class="hidden md:hidden">
    <div class="container py-4 space-y-2">
      {
        navs.map(nav => (
          <a
            class={`block py-2 px-4 rounded-md ${nav.active ? 'bg-gray-100 text-foreground font-medium' : 'text-foreground/60'}`}
            href={nav.href}
          >{nav.name}</a>
        ))
      }
    </div>
  </div>
</div>

<script>
  // 移动端菜单切换
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  
  if (mobileMenuButton && mobileMenu) {
    mobileMenuButton.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });
  }
</script>
